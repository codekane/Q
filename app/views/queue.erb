<% if @name %>
  <nav class="navbar navbar-dark bg-dark" id="queue-nav">
    <h1 class="navbar-brand">Hello <%= @name %></h1>
    <button class="btn btn-primary" id="queue-popper">Add Video</button>
  </nav>

  <div id="player"></div>

  <script>
    // 2. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3. This function creates an <iframe> (and YouTube player)
    //    after the API code downloads.
    var player;
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '390',
        width: '640',
        videoId: 'M7lc1UVf-VE',
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    }

    // 4. The API will call this function when the video player is ready.
    function onPlayerReady(event) {
      event.target.playVideo();
    }

    // 5. The API calls this function when the player's state changes.
    //    The function indicates that when playing a video (state=1),
    //    the player should play for six seconds and then stop.
    var done = false;
    function onPlayerStateChange(event) {
      if (event.data == YT.PlayerState.PLAYING && !done) {
        setTimeout(stopVideo, 6000);
        done = true;
      }
    }
    function stopVideo() {
      player.stopVideo();
    }
  </script>
  <div class="container hidden" id="queue-pop" style="z-index: 2; position: absolute; left: 5%; top: 5%;">
    <div class="row">
      <div class="col">
        <img src="/images/YouTube_Logo.svg" style="width: 100px; margin-top: 5%;"/>
      </div>
      <form>
        <div class="form-row">
          <div class="col">
            <label for="searchInput">Search for a Video</label>
            <input type="text" name="search" class="form-control" id="searchInput">
          </div>
          <div class="col">
            <button type="submit" class="btn btn-primary" id="searchSubmit" style="margin-top: 5%;">Search</button>
          </div>
        </div>
      </form>
    </div>

    <div class="row">
      <div class="container">
        <div class="row" id="responseData">
          <div class="col">
            <p>Results Per Page:</p>
          </div>
          <div class="col">
            <p>Total Results:</p>
          </div>
        </div>
      </div>
      <div class="container" id="searchResults">
      </div>
      <div class="container" id="pagination">
        <div class="row">
          <div class="column">
            <button id="previousPage" class="btn btn-danger">Previous Page</button>
          </div>
          <div class="column">
            <button id="nextPage" class="btn btn-success">Next Page</button>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="container-fluid">
      <h1 class="text-center">and you are?[<%=@name%>]</h1>
      <form action="/register" method="post">
        <div class="form-group">
          <label for="nameInput">Who people should know you as</label>
          <input type="text" name="name" class="form-control" id="nameInput" placeholder="bigbadjesus">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
  <% end %>
